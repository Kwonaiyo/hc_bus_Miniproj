<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>버스 도착 시간 안내</title>

        <style>
            body{
                background-color: violet;
            }
            ul{
                
            }
            li{
                list-style-image: url("BUS_PROJECT VER1.0/img/bus_icon.jpg");
                background-color : burlywood;
                width: 200px;
                height: 20px;
            }
            
            
        </style>
    </head>
    <body>
        <h1>{{name_a}}</h1>
        <button>새로고침</button>   <!-- 기능 구현 해야함-->
        <img src="BUS_PROJECT VER1.0/img/bus_icon.jpg" style="width: 100px; height: 100px">
        <div class="data_c">
            <ul id='list'>

            </ul>
        </div>

        <script>
            let test_list = []
            test_list = {{raw_list | safe}};
            let arsno_i_data_j_arsno = ""
            let arsno_i_data_j_nodenm = ""
            let arsno_i_data_j_lineno = ""
            let arsno_i_data_j_bustype = ""
            let arsno_i_data_j_min1 = ""
            let arsno_i_data_j_station1 = ""
            let arsno_i_data_j_min2 = ""
            let arsno_i_data_j_station2 =""
            
            // let header_node = document.createElement('h1')
            // let h_text = text_list[0]['nodenm']
            // let header_text_node = document.createTextNode(h_text)
            // header_node.appendChild(header_text_node)
            // document.getElementById('head_node').appendChild(header_node)
            
            for (let i = 0; i < test_list.length; i++){
                let t = []

                // t.push("정류장번호 : " + {{value}})
                //arsno_i_data_j_nodenm = JSON.stringify(test_list[i]['nodenm']).replaceAll('"', '')
                //t.push("정류장명 : " + arsno_i_data_j_nodenm)
                arsno_i_data_j_lineno = JSON.stringify(test_list[i]['lineno']).replaceAll('"', '')
                t.push("버스번호 : " + arsno_i_data_j_lineno)
                arsno_i_data_j_bustype = JSON.stringify(test_list[i]['bustype']).replaceAll('"', '')
                t.push("버스유형 : " + arsno_i_data_j_bustype)
                if (JSON.stringify(test_list[i]['min1']) != null){
                    arsno_i_data_j_min1 = JSON.stringify(test_list[i]['min1']).replaceAll('"', '')
                    t.push("도착 "+arsno_i_data_j_min1+"분 전")
                    arsno_i_data_j_station1 = JSON.stringify(test_list[i]['station1']).replaceAll('"', '')
                    t.push(arsno_i_data_j_station1+" 정류장 전")
                }
                else{
                    t.push("도착 예정 정보 없음")
                }
                if (JSON.stringify(test_list[i]['min2']) != null){
                    arsno_i_data_j_min2 = JSON.stringify(test_list[i]['min2']).replaceAll('"', '')
                    t.push("도착" + arsno_i_data_j_min2+" 분 전")
                    arsno_i_data_j_station2 = JSON.stringify(test_list[i]['station2']).replaceAll('"', '')
                    t.push(arsno_i_data_j_station2+" 정류장 전")
                }
                

                for(let i = 0; i < t.length; i++){
                    let li_node = document.createElement('li')
                    // if (i = 0){
                    //     let t_texta = dcocument.createTextNode(t[i])
                    //     // 텍스트 굵게 설정 어케함?
                    //     li_node.className = "BusNo"
                    // }
                    let t_texta = document.createTextNode(t[i])
                    li_node.appendChild(t_texta);
                    document.getElementById('list').appendChild(li_node)
                }

                temp_str = "----------------------"
                t_text = document.createTextNode(temp_str)
                document.getElementById('list').appendChild(t_text)
            }
        </script>
    </body>
</html>